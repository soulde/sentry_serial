| Modify Note                                             |
| :------------------------------------------------------ |
| 1. 改正云台控制数据长度错误。                           |
| 2. 修改底盘运动格式，加入航向角，移动陀螺标志至单独帧。 |
| 3. 增加敌方颜色帧。                                     |
| 4. 增加心跳包。                                         |
| 5. 添加UWP数据包                                        |

------



# 帧格式

| 0XFE | 1Byte | 1Byte | Mutiple Bytes |      1Byte      |
| :--: | :---: | :---: | :-----------: | :-------------: |
| 帧头 |  ID   | CRC8  |     Data      | CRC8（Optimal） |

> **帧头：**固定字节**0XFE**
>
> **ID：**ID列表中介绍的ID号
>
> **CRC8：**前三字节CRC校验，若无数据位数据包结束
>
> **Data：**ID列表中介绍的数据帧
>
> **CRC8（Optimal）：**帧CRC校验，若无数据帧则不存在

# 串口配置
配置为波特率 115200，8 位数据位，1 位停止位，无硬件流控，无校验位。

# ID列表

## 上位机 -> 下位机

### 0X01 云台控制

数据长度：9字节

发送频率：100Hz

| 4Bytes | 4Bytes | 1Byte |
| :----: | :----: | :---: |
| Pitch  |  Yaw   | Fire  |

> **Pitch：**云台俯仰轴运动角度**增量**，单精度浮点
>
> **Yaw：**云台偏航轴运动角度**增量**，单精度浮点
>
> **Fire：**云台发射机构标志位，为**0X01**时发射

### 0x02 底盘运动

数据长度：12字节

发送频率：100Hz

| 4Bytes | 4Bytes | 4Byte |
| :----: | :----: | :---: |
|   X    |   Y    |  Yaw  |

> **X：**底盘前后方向（**前为正**）运动**速度**(m/s)，单精度浮点
>
> **Y：**底盘左右方向（**左为正**）运动**速度**(m/s)，单精度浮点
>
> **Yaw：**底盘航向角增量，（**逆时针为正**）运动**角度**（rad/s，[-180, 180])，单精度浮点

### 0x41 心跳包

数据长度：0字节

发送频率：不定

### 0x42 重置里程计（不实现）

数据长度：0字节

发送频率：不定
### 0x43 陀螺模式切换

数据长度：0字节

发送频率：不定

------

## 下位机 -> 上位机

### 0X81 云台反馈

数据长度：12字节

发送频率：100Hz

| 4Bytes | 4Bytes | 4Byte |
| :----: | :----: | :---: |
| Pitch  |  Yaw   | Fire  |

> **Pitch：**云台俯仰轴角位置，单精度浮点
>
> **Yaw：**云台偏航轴角位置，单精度浮点
>
> **Fire：**子弹射速，单精度浮点

### 0x82 底盘里程计（不实现）

数据长度：12字节

发送频率：100Hz

| 4Bytes | 4Bytes | 4Bytes |
| :----: | :----: | :----: |
|   X    |   Y    |  Yaw   |

> **X：**底盘前后方向（**前为正**）运动**位移**(m)，单精度浮点
>
> **Y：**底盘左右方向（**左为正**）运动**位移**(m)，单精度浮点
>
> **R：**底盘航向角（**逆时针为正**）运动**角度**（rad/s，[-180, 180])，单精度浮点


### 0X83 设置定位点
数据长度：8字节

发送频率：不定

| 4Bytes | 4Bytes | 
| :----: | :----: |
|   X    |   Y    |


### 0x84 敌方颜色

数据长度：1字节

| 4Bytes |
| :----: |
|  R/B   |

> **R/B：**敌方颜色标志：**红**为**0**、**蓝**为**1**

发送频率：初始化发送
### 0X83 UWP定位数据
数据长度：8字节
发送频率：10Hz

| 4Bytes | 4Bytes |
| :----: | :----: |
|   X    |   Y    |

### 0xC1 Buff模式切换

数据长度：0字节

发送频率：不定

------

# Tips

STM32、Ubuntu、Windows皆为小端模式，数据直接顺序接收即可。
